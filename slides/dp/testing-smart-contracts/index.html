<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>Testing - Smart Contracts</title>
		<link rel="alternate" type="application/rss+xml" title="RSS" href="/index.xml">
		<link rel="canonical" href="https://natchineth.com/slides/dp/testing-smart-contracts/">
		<link rel="shortcut icon" type="image/png" href="/apple-touch-icon-precomposed.png">
		
		
		<meta name="generator" content="Hugo 0.55.6" />

		
		<meta property="og:title" content="Testing - Smart Contracts" />
		<meta property="og:type" content="article" />
		<meta property="og:image" content="https://natchineth.com" />
		<meta property="og:description" content="" />
		<meta property="og:url" content="https://natchineth.com/slides/dp/testing-smart-contracts/" />
		<meta property="og:site_name" content="Testing - Smart Contracts" />
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:site" content="@" />


		
					<link rel="stylesheet" type="text/css" href="https://natchineth.com/css/apron.css"></style>
					<link rel="stylesheet" type="text/css" href="https://natchineth.com/css/descartes.css"></style>
					<link rel="stylesheet" type="text/css" href="https://natchineth.com/css/adirondack.css"></style><style type="text/css">
		 
		@page {
				  size:  1216px 684px; 
				  margin: 0;
		}
		</style>
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.3.1/css/all.css" integrity="sha384-mzrmE5qonljUremFsqc01SB46JvROS7bZs3IO2EmfFsd15uHvIt+Y8vEf7N7fWAU" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Quattrocento+Sans:400,400i,700,700i|Quattrocento:400,700|Spectral:400,400i,700,700i&amp;subset=latin-ext" rel="stylesheet">


		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		
		<script src="/js/story.js"></script>

	</head>
	<body class="ma0 bg-white section-slides page-kind-page is-page-true ">
		
  

		<main role="main">
		
    <textarea id="source">class: title
# Testing Smart Contracts 

---
class: left

## Agenda

1. Testing Principles
2. Embark and Mocha Tests
3. Do it yourself

---

## “Testing is the primary purpose of a Smart Contract Developer”

## Very little time is spent writing code compared to the time writing tests

---

## Test Driven Development

 - Understand the business requirement 
 - Created automated tests meeting said requirement
 - Run the test. It should fail.
 - Create code logic implementing the functionality 
 - Run the test again. It should pass 
 - Once all tests pass, the coding functionality fulfills that specific requirement
 - Refactor the code for future maintainability, and rerun all the tests to ensure you didn&#39;t break anything

---

## Functional: Unit Tests

- Keeping units extremely small 
- Test every method and individual parameters at a time 

---

## Good Unit Test 

 - Runs quickly - very fast setup and breakdown time 
 - Runs in isolation - should be reorderable and not affect the passing/failing of tests 
 - Using mock data - making them easier to understand 
 - Using real data - when the functionality requires 
 - Represents a single step towards your end goal
 
---
## Integration Test

 - Testing interaction with external class or module 
 - Used to be able to tell whether parts are working together and connected as expected

---
background-image: url(bg.jpeg)

## Mistakes in Smart Contracts 

Mistakes in smart contracts are deadly expensive. A small mistake could cost millions. 

**100% code coverage is a minimum.**
---

## Achieving 100% Code Coverage 

- Each statement in your contract should be hit when your test suite runs 
- Use software &amp; your team to determine whether or not you have a 100% coverage 

### How do I achieve it? 

 - Positive - test that your code behaves as expected with *valid* data 
 - Negative - test that your code behaves as expected with *invalid* data 

---

## Failing Tests

Make sure your tests are testing what you think they are testing. 

If a test is supposed to fail, make sure it&#39;s failing for the right reason.

---

## I found a bug. What do I do? 

*TDD.* 

 1. Write a new test that fails if the bug is present 
 2. Correct the broken code 
 3. Run your test suite again and expect all your tests to pass
 4. Commit both the code and the test suite to git 
   - This ensures that you do not re-introduce old bugs

---

## Testing Smart Contracts 

### Mocha

 - Tests should be organized in `contract()` suits 
 - A single test in the suite should make use of `it()`

### Chai 

 - Using expect or should in idiomatic languages
 - ie: expectation that something is going to happen

---

## Lab

Use the contracts that you used for Deep Dive into Solidity. 

Write tests for these contracts. 

Ensure that you are getting 100% statement test coverage.
</textarea>
    <script type="text/javascript" src="https://natchineth.com/js/qrcode.js"></script>
    <script src="https://natchineth.com/js/remark.js"></script>
    <script>
      var slideshow = remark.create({
          ratio: "16:9", 
         navigation: {
            scroll: false
         },
         countIncrementalSlides: false,
         slideNumberFormat: '%current%',
			highlightLanguage: "xaprb",
			placeholder: "dummy value to end the list without a comma"
      });

		
		
		$(".remark-slide-content.fit-h1 h1").each(function(i, e) {
			var $e = $(e);
			var $p = $e.closest('div.remark-slide-container');
			var needsToggle = !$p.hasClass('remark-visible');
			if ( needsToggle ) $p.toggleClass('remark-visible');
			while (e.scrollHeight > e.clientHeight + 1 && $e.css('font-size') != '1px') {
				$e.css('font-size', (parseInt($e.css('font-size')) - 1) + "px");
				
				
			}
			if ( needsToggle ) $p.toggleClass('remark-visible');
		});

		$( function() {
			if ( $( "body.feature-qrcode:not(.feature-noqrcode)" ).length ) {
				if ( $( ".qrcode" ).length ) {
					new QRCode($(".qrcode")[0], {
						"useSVG": true,
						"text": window.location.href.replace(/#\d*$/, "")
					});
				}
			}
		});

    </script>

		</main>
		
  

		
		
  

	
	
	</body>
</html>
